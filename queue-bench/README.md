# Queue Bench Result

Test machine parameters:
* CPU: Intel(R) Xeon(R) Gold 5218R CPU @ 2.10GHz
* OS: Linux 5.4.0-139-generic #156-Ubuntu x86_64
* Compiler: gcc version 9.4.0 (Ubuntu 9.4.0-1ubuntu1~20.04.1)
* Memory: DDR4 46GB

cons: the number of consumers
prod: the number of produsers

# Hts Mode

Hts Mode(Hard tail mode) guarantees a consistent order of incoming and outgoing queues, although this approach may result in performance degradation.

## cons = 1

prod|rte_ring|clqueue
|---|---:|---:|
1|22.0061|33.987
2|4.22524|5.56774
4|3.57417|5.33268
5|3.65157|5.43836
8|1.76978|5.30414
10|2.091|5.06848
16|1.36113|4.78868
20|0.983137|4.19532

## cons = 2

prod|rte_ring|clqueue
|---|---:|---:|
1|6.57847|5.56505
2|6.13203|4.75044
4|4.25217|3.60033
5|4.06463|4.19762
8|3.27631|3.97649
10|2.06189|3.06545
16|1.87678|3.62951
20|1.02524|3.54233

## cons = 4

prod|rte_ring|clqueue
|---|---:|---:|
1|4.52915|3.0027
2|4.20897|4.75885
4|2.75915|3.60499
5|3.07579|2.97088
8|2.38452|2.71758
10|2.00437|3.55771
16|2.05748|3.28501
20|1.40941|3.40512

## cons = 5

prod|rte_ring|clqueue
|---|---:|---:|
1|3.95624|3.77138
2|2.3242|3.21831
4|3.54126|3.9407
5|2.71041|3.88236
8|1.86137|3.39938
10|1.79682|3.41779
16|1.70043|3.32011
20|0.918796|3.69784

## cons = 8

prod|rte_ring|clqueue
|---|---:|---:|
1|1.78429|4.2976
2|2.72212|3.38078
4|3.07315|3.51414
5|2.99996|3.52243
8|1.35499|3.37338
10|1.3979|3.32635
16|1.92845|3.79059
20|1.42102|3.62367

## cons = 10

prod|rte_ring|clqueue
|---|---:|---:|
1|1.46823|4.24733
2|1.99617|3.43853
4|2.89271|3.18777
5|1.54576|3.43436
8|1.73503|3.19192
10|2.21737|3.2357
16|1.4063|2.66787
20|1.34817|2.53048

## cons = 16

prod|rte_ring|clqueue
|---|---:|---:|
1|2.00814|4.04132
2|1.93862|4.05587
4|1.47913|3.03892
5|1.44442|3.69122
8|1.29634|3.88099
10|1.16158|3.80518
16|1.14642|2.13256
20|1.0022|2.2311

## cons = 20

prod|rte_ring|clqueue
|---|---:|---:|
1|1.41366|3.82281
2|1.61459|3.69579
4|2.36449|3.93975
5|2.23544|3.88561
8|1.40637|3.73635
10|1.3794|3.59628
16|1.67458|2.7911
20|1.57454|0.799099


# Rts Mode

Rts Mode(relax tail mode) relaxes the synchronisation of tails, which will result in a significant performance increase, but makes it impossible to guarantee a consistent sequence of enqueue and dequeue.

## cons = 1

prod|rte_ring|atomic_queue|moodycamel|clqueue
|---|---:|---:|---:|---:|
1|29.7247|5.16118|8.39468|59.4742
2|4.96988|6.55295|19.1843|18.512
4|3.67254|5.12597|21.5109|20.3285
5|3.02839|5.33772|22.3999|20.0144
8|1.81778|5.11135|22.7853|17.1406
10|3.42708|4.68858|21.8422|20.0537
16|2.07924|5.14316|12.3703|16.9635
20|1.75825|5.18229|8.24035|15.7446

## cons = 2

prod|rte_ring|atomic_queue|moodycamel|clqueue
|---|---:|---:|---:|---:|
1|6.37963|4.90364|5.98448|8.29683
2|4.99099|5.73056|4.70376|5.4471
4|3.37339|3.03177|7.1397|6.63689
5|2.91843|3.72417|6.95439|7.04657
8|1.3286|3.50922|7.34063|6.71556
10|1.58861|3.56255|3.49133|6.49519
16|0.873702|3.33667|7.72159|6.48013
20|0.811446|3.64248|6.32095|5.96609

## cons = 4

prod|rte_ring|atomic_queue|moodycamel|clqueue
|---|---:|---:|---:|---:|
1|5.42714|4.21592|5.63936|7.80147
2|3.63998|3.84648|6.33951|7.80013
4|2.88515|2.51757|6.35789|5.42055
5|2.4006|3.55337|6.97306|6.11292
8|1.76112|3.25484|4.46046|6.83737
10|0.944139|3.04755|7.12464|6.73918
16|0.809527|2.82274|7.59157|6.90799
20|1.05684|2.66904|7.06759|6.46751

## cons = 5

prod|rte_ring|atomic_queue|moodycamel|clqueue
|---|---:|---:|---:|---:|
1|5.08564|3.5913|3.09632|7.62806
2|2.94511|3.37152|4.6212|7.59503
4|2.3966|3.29362|6.08739|6.24173
5|2.32226|3.22756|5.32893|7.27516
8|1.45957|2.62452|6.72034|6.90541
10|1.2153|2.98893|5.79425|6.45895
16|0.701581|2.66334|7.99571|7.60572
20|0.916991|2.93686|7.81207|6.6364

## cons = 8

prod|rte_ring|atomic_queue|moodycamel|clqueue
|---|---:|---:|---:|---:|
1|4.59732|2.14315|3.82531|5.0852
2|2.26081|2.28142|5.16409|7.70386
4|1.29846|2.42029|5.59556|7.17046
5|1.38199|2.4528|6.26268|7.0619
8|1.38576|2.52415|6.46362|5.64172
10|1.29893|2.25508|7.33611|6.83831
16|0.82971|2.66825|8.31843|8.19397
20|0.694002|2.68622|8.2197|7.06015

## cons = 10

prod|rte_ring|atomic_queue|moodycamel|clqueue
|---|---:|---:|---:|---:|
1|4.05849|2.25989|3.26682|4.9351
2|1.12517|2.13847|5.74541|6.75667
4|1.14356|2.35095|5.53354|7.6158
5|1.24787|2.40875|6.99996|7.03012
8|1.30767|2.15196|6.64964|7.03453
10|0.971078|1.97195|8.22477|7.30519
16|0.986571|2.6691|8.39123|8.83986
20|0.933156|2.51814|7.80299|7.17952

## cons = 16

prod|rte_ring|atomic_queue|moodycamel|clqueue
|---|---:|---:|---:|---:|
1|2.91037|1.45645|2.00783|3.63389
2|1.18919|1.61575|7.92318|5.64579
4|1.0549|1.91648|8.44816|7.34975
5|0.740197|1.89641|9.05141|7.62945
8|1.49812|2.42747|8.2861|8.09835
10|1.17397|2.25019|10.8639|9.53007
16|1.14063|2.12664|11.0595|9.27911
20|0.763123|1.9355|7.51755|7.81818

## cons = 20

prod|rte_ring|atomic_queue|moodycamel|clqueue
|---|---:|---:|---:|---:|
1|2.56077|1.32323|1.81682|3.11574
2|1.01378|1.7289|6.98066|5.61927
4|1.12757|1.96232|9.16372|8.15003
5|0.746604|2.238|10.0239|9.25695
8|0.827959|2.25035|10.4724|10.12
10|0.804309|2.23512|9.15416|10.3755
16|0.727559|1.90118|7.87358|9.5249
20|0.737083|1.61937|8.23995|8.60171
